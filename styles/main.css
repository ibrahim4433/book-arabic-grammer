@import url('https://fonts.googleapis.com/css2?family=Noto+Kufi+Arabic:wght@700;900&family=Noto+Naskh+Arabic:wght@400;500;700&display=swap');

:root {
    /* PALETTE: Modern Academic */
    --color-primary: #00897B;   /* Teal (Definitions/Good) */
    --color-accent: #D84315;    /* Burnt Orange (Warnings/Exceptions) */
    --color-dark: #263238;      /* Text */
    --color-light: #F5F5F5;     /* Backgrounds */
    --color-white: #FFFFFF;
    
    /* DENSITY VARIABLES */
    --spacing-tight: 1mm;
    --spacing-std: 1.5mm;
    --radius: 4px; /* Tighter radius = More professional */
    
    /* SHADOWS (Kept per your request, but refined) */
    --shadow-card: 0 4px 6px rgba(0,0,0,0.04), 0 1px 3px rgba(0,0,0,0.08);
}

/* 1. PAGE SETUP - "THE OLD BOOK" DENSITY */
@page {
    size: A4;
    /* Small margins like the classic book to maximize space */
    margin: 5mm 5mm 10mm 5mm;

    /* FOOTER - Automatic Page Numbering */
    @bottom-center {
        content: counter(page);
        font-family: 'Noto Kufi Arabic';
        font-weight: bold;
        font-size: 12pt;
        color: var(--color-primary);
    }
}

html { direction: rtl; lang: ar; }

body {
    font-family: 'Noto Naskh Arabic', serif;
    color: var(--color-dark);
    font-size: 10.8pt; /* Dense but readable */
    line-height: 1.15;
    margin: 0; /* CRITICAL FIX */
}

/* 2. THE HEADER STRIP (Like the Old Book) */
.page-header-strip {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 2px solid var(--color-primary);
    padding-bottom: 2mm;
    margin-bottom: 2mm;
}

/* New Header Helper Classes */
.header-section {
    display: flex;
    align-items: center;
}

.header-section.right {
    gap: 4mm;
}

.header-section.center {
    flex: 1;
    display: flex;
    justify-content: center;
}

.header-section.left {
    flex-direction: column;
    /* Align text to left in LTR context, but right/start in RTL */
    /* Since direction is RTL, flex-end of row is left. But this is column. */
    /* Let's be specific. Text-align left was requested in previous code, but flex handles alignment. */
    align-items: stretch;
    text-align: center;
}

.lesson-number {
    font-family: 'Noto Kufi Arabic';
    font-size: 24pt;
    color: var(--color-primary);
    font-weight: 900;
    line-height: 1;
}

.lesson-details {
    display: flex;
    flex-direction: column;
    font-family: 'Noto Kufi Arabic';
    font-size: 10pt;
    color: #757575;
    font-weight: 700;
    white-space: nowrap;
}

.author-info {
    font-family: 'Noto Kufi Arabic';
    font-size: 10pt;
    color: #757575;
    font-weight: 700;
    line-height: 1.4;
    text-align: center;
}

.header-title {
    font-family: 'Noto Kufi Arabic';
    color: var(--color-primary);
    font-weight: 900;
    font-size: 14pt;
    margin: 0;
}

.header-subtitle {
    font-family: 'Noto Kufi Arabic';
    color: #757575;
    font-size: 10pt;
    margin: 0;
}

/* 3. DENSE CONTENT CARDS (The "Blocks") */
.content-block {
    background: var(--color-white);
    border-radius: var(--radius);
    box-shadow: var(--shadow-card);
    margin-bottom: var(--spacing-std);
    overflow: hidden; /* Ensures header color doesn't bleed */
    page-break-inside: avoid; /* Keep blocks intact */
}

/* Header inside the card (Like the Green/Blue titles in your photos) */
.block-header {
    background-color: var(--color-primary);
    color: white;
    padding: 1.5mm 3mm;
    font-family: 'Noto Kufi Arabic';
    font-size: 10pt;
    font-weight: 700;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.block-header.accent {
    background-color: var(--color-accent);
}

.block-body {
    padding: 2mm;
}

/* 4. SPLIT LAYOUT (Tables/Comparisons) */
.split-grid {
    display: flex;
    flex-direction: row;
    gap: var(--spacing-std);
}

.split-grid > * {
    flex: 1;
}

/* 5. STRUCTURED LISTS (Replacing bullets) */
.structured-list {
    margin: 0;
    padding: 0;
    list-style: none;
}

.structured-list li {
    padding: 1mm 0;
    border-bottom: 1px dashed #EEEEEE;
    display: flex;
    align-items: flex-start;
}

.structured-list li:last-child { border-bottom: none; }

.marker {
    color: var(--color-primary);
    font-weight: bold;
    margin-left: 3mm;
    min-width: 5mm;
}

/* 6. "BENEFIT" BOX (The Fawa'id) */
.benefit-box {
    background-color: #E0F2F1; /* Light Teal */
    border-right: 4px solid var(--color-primary);
    padding: 2mm 3mm;
    margin-top: 1.5mm;
    font-size: 10pt;
    color: #004D40;
}

/* --- ADD TO styles/main.css --- */

/* 1. FIXED PAGE NUMBER (Anchored & Styled) */
@page {
    /* ... existing margins ... */
    
    /* Clear the default content first */
    @bottom-left { content: none; }
    
    /* Place number in the bottom-left with a green circle */
    @bottom-left {
        content: counter(page, arabic-indic);
        background-color: var(--color-primary);
        color: white;
        width: 8mm;
        height: 8mm;
        border-radius: 50%;
        text-align: center;
        line-height: 8mm;
        font-family: 'Noto Kufi Arabic';
        font-weight: 900;
        font-size: 10pt;
        margin-bottom: 2mm;
    }

    @bottom-center { content: none; }
}

/* 2. THE GRAMMAR TABLE (Dense & Striped) */
.dense-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 10pt;
    margin-bottom: var(--spacing-std);
    box-shadow: var(--shadow-card);
    border-radius: var(--radius);
    overflow: hidden;
    /* Thick Primary Teal borders on sides and bottom */
    border-left: 3px solid var(--color-primary);
    border-right: 3px solid var(--color-primary);
    border-bottom: 3px solid var(--color-primary);
}

.dense-table th {
    background-color: var(--color-primary);
    color: white;
    padding: 1.5mm 3mm;
    text-align: right;
    font-family: 'Noto Kufi Arabic';
    /* Vertical separator (Internal) */
    border-left: 2px solid var(--color-primary);
}

.dense-table td {
    padding: 1.5mm 3mm;
    border-bottom: 1px solid #EEEEEE;
    color: var(--color-dark);
    /* Vertical separator (Internal) */
    border-left: 2px solid var(--color-primary);
}

/* Zebra Striping for readability */
.dense-table tr:nth-child(even) { background-color: #FAFAFA; }


/* 3. POETRY LAYOUT (The "Shatr" System) */
.poem-container {
    background-color: #FFF;
    border-right: 4px solid var(--color-accent); /* Orange strip */
    padding: 3mm;
    margin-bottom: var(--spacing-std);
    box-shadow: var(--shadow-card);
    border-radius: var(--radius);
}

.poem-line {
    display: flex;
    justify-content: space-between;
    margin-bottom: 1.5mm;
    font-weight: bold;
    font-size: 11pt;
}

.hemistich {
    flex: 1;
    text-align: center;
    position: relative;
}

/* The divider between hemistichs */
.hemistich:first-child::after {
    content: "•••";
    position: absolute;
    left: -5px;
    color: #E0E0E0;
    font-size: 8pt;
}


/* 4. THE I'RAB CARD (Parsing Analysis) */
.irab-box {
    border: 1px solid #E0E0E0;
    border-radius: var(--radius);
    margin-bottom: 2mm;
    display: flex;
    align-items: stretch;
    background: white;
}

.irab-word {
    background-color: var(--color-primary);
    color: white;
    width: 25mm;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-family: 'Noto Kufi Arabic';
    padding: 1.5mm;
    border-radius: 0 var(--radius) var(--radius) 0; /* Rounded right side only (RTL) */
}

.irab-details {
    padding: 2mm 3mm;
    font-size: 10pt;
    flex: 1;
}


/* 5. BIO BOX (For Poets) */
.bio-card {
    display: flex;
    gap: 3mm;
    background-color: #ECEFF1; /* Blue Grey Light */
    padding: 3mm;
    border-radius: var(--radius);
    margin-bottom: var(--spacing-std);
    align-items: center;
}

/* 6. EXAM / QUIZ STYLES */
.exam-question {
    margin-bottom: 2mm;
    border-bottom: 1px dashed #BDBDBD;
    padding-bottom: 3mm;
}

.exam-number {
    display: inline-block;
    background: var(--color-accent);
    color: white;
    width: 6mm;
    height: 6mm;
    text-align: center;
    line-height: 6mm;
    border-radius: 50%;
    margin-left: 3mm;
    font-weight: bold;
}

/* 7. GLOBAL LAYERS (Fixed Background & Watermark) */
.global-background-layer {
    position: fixed;
    z-index: -1000;
    /* Offset negative margins to cover the entire page (bleed) */
    top: -5mm;
    left: -5mm;
    width: 210mm;
    height: 297mm;
    background-image: url('../assets/page-background/background.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    pointer-events: none;
}

.global-watermark-layer {
    position: fixed;
    z-index: 9999; /* Above all content */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: none;
}

.watermark-text {
    font-family: 'Noto Kufi Arabic';
    font-weight: 900;
    font-size: 80pt;
    color: #000000;
    opacity: 0.2;
    transform: rotate(-45deg);
    white-space: nowrap;
}

/* ICON UTILITIES */
.icon-pencil::before {
    content: "\270E";
    margin-left: 2mm;
}
/* =========================================
   TOC STYLES (Moved from 01_toc.html)
   ========================================= */

.toc-header-section {
    text-align: center;
    margin-bottom: 20mm;
}

.toc-main-title {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 5mm;
    color: var(--color-secondary);
}

.toc-subtitle {
    font-size: 1.5rem;
    color: var(--color-accent);
    font-weight: 500;
}

.toc-chapter {
    display: flex;
    flex-direction: row; /* In RTL, this puts the first child (number) on the right */
    margin-bottom: 15mm;
    break-inside: avoid;
    page-break-inside: avoid;
    align-items: flex-start;
}

.toc-number {
    font-size: 3rem;
    font-weight: 700;
    color: var(--color-primary);
    line-height: 1;
    margin-left: 20px; /* Space between number and content */
    flex-shrink: 0;
    min-width: 60px;
}

.toc-content {
    flex-grow: 1;
}

.toc-item-title {
    font-size: 1.8rem;
    font-family: 'Noto Kufi Arabic';
    color: var(--color-secondary);
    margin: 0 0 2mm 0;
    font-weight: 700;
}

.toc-item-subtitle {
    font-size: 1.2rem;
    color: var(--color-accent);
    margin: 0 0 5mm 0;
    font-style: italic;
}

.toc-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.toc-list li {
    position: relative;
    padding-right: 20px;
    margin-bottom: 3mm;
    font-size: 1rem;
    color: var(--color-secondary);
    line-height: 1.6;
}

/* Custom Marker: Teal Square */
.toc-list li::before {
    content: '';
    position: absolute;
    right: 0;
    top: 0.6em; /* Align with text */
    width: 8px;
    height: 8px;
    background-color: var(--color-primary);
}

.toc-footer {
    margin-top: 20mm;
    padding-top: 10mm;
    border-top: 2px solid var(--color-primary);
    text-align: center;
    font-style: italic;
    color: var(--color-secondary);
    break-inside: avoid;
    page-break-inside: avoid;
}
